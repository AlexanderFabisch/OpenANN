# !/usr/bin/env ruby

CHAR_MATRIX = [
    "ABCDEF",
    "GHIJKL",
    "MNOPQR",
    "STUVWX",
    "YZ1234",
    "56789_"
]

directory = if ARGV.empty? then "." else ARGV[0] end
puts "Generating classifier targets in #{directory}..."

["a", "b"].each do |subject|
  char_file_name = "true_labels_#{subject}.txt"
  target_characters = ""
  File.open directory + "/" + char_file_name do |file|
    target_characters = file.read.strip
  end
  target_ascii = []
  (0...target_characters.size).each do |i|
    target_ascii << target_characters[i]
  end
  File.open directory + "/Subject_#{subject.capitalize}_Test_TargetChar.txt", "w" do |file|
    file.write target_ascii * "\n"
  end
  stimulus_code = ""
  File.open directory + "/Subject_#{subject.capitalize}_Test_StimulusType.txt" do |file|
    while line = file.gets
      types = line.split
      (0...types.size).each do |epoch|
        type = types[epoch].to_i
        # TODO implement
        if type < 6 # col
          col = type
          (0...6).each do |row|
            
          end
        else # row
          row = type - 6
          (0...6).each do |col|
            
          end
        end
      end
    end
  end
end
